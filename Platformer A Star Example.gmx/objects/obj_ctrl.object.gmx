<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Initialise
//Call this first.
platformer_astar_start()

//Create a grid, each cell is going to be 32 pixles - so we may as well use a magic number... They're great practice... ahem...
grd_ai=platformer_astar_grid_create(room_width/32,room_height/32)

//The grid is filled with air by default - so we don't need to clear it.

//Set up the example paint brush
paint = "Ground"
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="51">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Clear
//Paints air under the mouse.
platformer_astar_grid_set_cell(grd_ai,mouse_x div 32,mouse_y div 32,pas_air,1)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="50">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Paint
//Paints the cell under the mouse - the div operator works the same as division and then floor.
switch paint
{
    case "Ground":
        //Paint ground - if the cost is between 999 and 999.999 then the cell is impassable - that seems fitting.
        //If this game allowed you to dig then the ground would be set to something like 998 to make it a "last resort" action but not disallowed.
        platformer_astar_grid_set_cell(grd_ai,mouse_x div 32,mouse_y div 32,pas_ground,999)
    break;
    
    case "Water":
        //Paint water - the cost is 1.5 to make the ai preference walking over swimming.
        platformer_astar_grid_set_cell(grd_ai,mouse_x div 32,mouse_y div 32,pas_water,1.5)
    break;
    
    case "Ladder":
        //Paint ladders - the cost is the same as air in this case. (remember the ai is able to just walk past them without climbing)
        platformer_astar_grid_set_cell(grd_ai,mouse_x div 32,mouse_y div 32,pas_ladder,1)
    break;
    
    case "Platform":
        //Paint platforms - the cost is also the same as air in this case.
        platformer_astar_grid_set_cell(grd_ai,mouse_x div 32,mouse_y div 32,pas_platform,1)
    break;
    
    case "Danger":
        //Paint danger - the cost doesn't really matter in this case. Dangers could be something like lava or spikes.
        platformer_astar_grid_set_cell(grd_ai,mouse_x div 32,mouse_y div 32,pas_danger,999)
    break;
    
    case "Player":
        //Move the player to the mouse.
        obj_player.x = mouse_x div 32
        obj_player.y = mouse_y div 32
        //set the player's restarting point
        obj_player.xstart = obj_player.x
        obj_player.ystart = obj_player.y
    break;
    
    case "Goal":
        //Move the goal to the mouse.
        obj_goal.x = mouse_x div 32
        obj_goal.y = mouse_y div 32
    break;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw the example
//This is way more complicated than it needs to be
var xx,yy,c,light_col,above_cell;

for (yy=0;yy&lt;room_height/32;yy+=1)
for (xx=0;xx&lt;room_width/32;xx+=1)
{
    //switch through the possable cell contents
    switch platformer_astar_grid_get_cell_type(grd_ai,xx,yy)
    {
        case pas_air:
            c=c_teal
        break;
        
        case pas_ground:
            c=c_dkgray
        break;
        
        case pas_water:
            c=c_blue
        break;
        
        case pas_ladder:
            c=c_olive
        break;
        
        case pas_platform:
            c=c_gray
        break;
        
        case pas_danger:
            c=c_orange
        break;
    }
    
    // Make the platform look thinner
    if c=c_gray
    {
        draw_rectangle_color(xx*32,yy*32,xx*32+31,yy*32+31,c_teal,c_teal,c_teal,c_teal,false)
        
        //Apply light to the platforms if they have a clear block above them.
        above_cell = platformer_astar_grid_get_cell_type(grd_ai,xx,yy-1)
        if above_cell = pas_air || above_cell = pas_ladder || above_cell = pas_platform &amp;&amp; c != c_teal
        draw_rectangle_color(xx*32,yy*32,xx*32+31,yy*32+3,c,c,c_dkgray,c_dkgray,false)
        else
        draw_rectangle_color(xx*32,yy*32,xx*32+31,yy*32+3,c_dkgray,c_dkgray,c_dkgray,c_dkgray,false)
    }
    else // Make the ladder look like a ladder
    if c=c_olive
    {
        light_col = merge_color(c,c_white,0.25)
        //air background
        draw_rectangle_color(xx*32,yy*32,xx*32+31,yy*32+31,c_teal,c_teal,c_teal,c_teal,false)
        
        //sides
        draw_rectangle_color(xx*32,yy*32,xx*32+3,yy*32+31,c,c,c,c,false)
        draw_rectangle_color(xx*32+28,yy*32,xx*32+31,yy*32+31,c,c,c,c,false)
        
        //grips
        draw_rectangle_color(xx*32,yy*32,xx*32+31,yy*32+3,light_col,light_col,c,c,false)
        draw_rectangle_color(xx*32,yy*32+8,xx*32+31,yy*32+11,light_col,light_col,c,c,false)
        draw_rectangle_color(xx*32,yy*32+16,xx*32+31,yy*32+19,light_col,light_col,c,c,false)
        draw_rectangle_color(xx*32,yy*32+24,xx*32+31,yy*32+27,light_col,light_col,c,c,false)
    }
    else
    {
        draw_rectangle_color(xx*32,yy*32,xx*32+31,yy*32+31,c,c,c,c,false)
        
        //Make the top platforms have light on them (assuming they're not air)
        above_cell = platformer_astar_grid_get_cell_type(grd_ai,xx,yy-1)
        if above_cell = pas_air || above_cell = pas_ladder || above_cell = pas_platform &amp;&amp; c != c_teal
        {
            light_col = merge_color(c,c_white,0.25)
            draw_rectangle_color(xx*32,yy*32,xx*32+31,yy*32+3,light_col,light_col,c,c,false)
        }
    }
    
    // Draw the grid if the player isn't moving
    if obj_player.x = obj_player.xstart &amp;&amp; obj_player.y = obj_player.ystart
    draw_rectangle_color(xx*32,yy*32,xx*32+32,yy*32+32,c_black,c_black,c_black,c_black,true)
}

draw_set_color(c_black)
draw_set_alpha(0.5)
draw_text(6,6,"Press 1 - 7 to select a paint brush.#Current brush: "+paint+"#Press space to run the A*")
draw_set_alpha(1)
draw_set_color(c_white)
draw_text(5,5,"Press 1 - 7 to select a paint brush.#Current brush: "+paint+"#Press space to run the A*")
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="55">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>paint = "Goal"
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="54">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>paint = "Player"
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="53">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>paint = "Danger"
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="52">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>paint = "Platform"
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="51">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>paint = "Ladder"
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="50">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>paint = "Water"
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="49">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>paint = "Ground"
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsShapePoints/>
</object>
